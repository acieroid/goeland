{{define "item"}}
<div class="task">
  <div class="input-append">
    <input class="span4 name" type="text" value="{{.Name}}" placeholder="Task name">
    <div class="btn-group">
      <input type="hidden" class="status" value="{{.Status}}">
      <button class="btn dropdown-toggle btn-status" data-toggle="dropdown">
        {{.Status}}
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu">
        <li><a class="btn btn-danger change-status">Todo</a></li>
        <li><a class="btn btn-warning change-status">Started</a></li>
        <li><a class="btn btn-success change-status">Done</a></li>
      </ul>
    </div>
  </div>
  <button class="btn remove-task" type="button">Remove task</button>
  <button class="btn add-sub-task" type="button">Add subtask</button>
  <button class="btn toggle-description" type="button">Toggle description</button></br>
  <textarea rows="3" {{ if .Description }} {{ else }} style="display:none;" {{ end }} class="description" placeholder="Task description">{{.Description}}</textarea>
  <div class="tasks">
    {{range .Items}}
    {{template "item" .}}
    {{end}}
  </div>
</div>
{{end}}

<form class="form-inline">
  <div class="input-append">
    <input class="span4" id="name" type="text" value="{{.Name}}">
    <input type="hidden" id="mtime" value="{{.ModificationTime}}">
    <button class="btn btn-primary" id="save" type="button">Save</button>
  </div>
  <button class="btn btn-primary" type="button" id="btn-add-task">Add task</button>
  <button class="btn btn-primary" type="button" id="btn-hide-descr">Hide descriptions</button>
  <span class="message label"></span>

  <br/><br/>
    <div class="progress">
    </div>
  <br/>

  <div id="tasks">
  {{range .Items}}
  {{template "item" .}}
  {{end}}
  </div>
</form>
<script src="/static/js/view.js"></script>
